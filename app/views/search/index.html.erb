<h3 style="padding-top: 10px;">Search for Quotes</h3>
<%= form_tag search_path, method: :get do %>
    <div class="form-group" style="padding-bottom: 10px;">
        <div class="row justify-content-md-center">
            <div class ="col-10">
                <%= text_field_tag :search_query, params[:search_query], placeholder: 'Search', class: "form-control" %>
            </div>
            <div class ="col-2">
                <%= select_tag :view_category, options_from_collection_for_select(Category.all, "id", "catname"), prompt: "Select a Category", class: "form-select" %>
            </div>
        </div>    
    </div>
    <%= submit_tag 'Find Quotes', class: "btn btn-primary" %>
<% end %>

<br>

<% if params[:view_category].present? || params[:search_query].present? %>
    <% if @quotematch.present? %>
        <h4 style="padding-top: 15px;">Results:</h4>
        <% @quotematch.each do |quote| %>
            <div class="card bg-body-tertiary" style="margin-bottom:10px">
                <div class="card-body">
                    <h5 class="card-title"> <%= quote.qtext %> </h5>
                    <p class="card-text">
                        <strong><%= quote.source.fname %> <%= quote.source.lname %></strong><br />
                        [<a href="/quotes/<%= quote.id %>">More details</a>]
                    </p>
                </div>
            </div>
        <% end %>
    <% else %>
        <p>No matching quotes found.</p>
    <% end %>
<% end %>